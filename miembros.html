<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P√°gina de Miembros - La Mente del F√©nix</title>
    <!-- Los estilos y enlaces CSS no cambian -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos CSS (sin cambios) */
        body{
            font-family: 'Montserrat', sans-serif;
            background-color: #fbf5e2;
            color: #0c2f5b;
            transition: opacity 0.3s ease-in-out;
        }
        .card {
            background-color: #ffffff;
            border: 1px solid #e0d9c6;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }
        .highlight-card {
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box, linear-gradient(to right, #00bcd4, #e91e63) border-box;
            border-radius: 0.5rem;
        }
        .message-card {
            background-color: #fffaf0;
            border: 2px dashed #e91e63;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .btn {
            position: relative;
            z-index: 1;
            overflow: hidden;
            transition: color 0.4s ease-out, background-color 0.3s;
            border: 2px solid transparent;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-pink { background-color: #e91e63; color: white; }
        .btn-cyan { background-color: #00bcd4; color: white; }
        .btn-whatsapp { background-color: #25D366; color: white; }
        .btn-telegram { background-color: #0088cc; color: white; }
        .btn:hover { filter: brightness(110%); }
        .btn-pink::before, .btn-cyan::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
            z-index: -1;
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.4s cubic-bezier(0.45, 0.05, 0.55, 0.95);
        }
        .btn-pink:hover { color: #e91e63; }
        .btn-cyan:hover { color: #00bcd4; }
        .btn-pink:hover::before { border: 2px solid #e91e63; transform: scaleX(1); transform-origin: left; }
        .btn-cyan:hover::before { border: 2px solid #00bcd4; transform: scaleX(1); transform-origin: left; }
        .text-brand-green { color: #00bcd4; }
        .text-brand-pink { color: #e91e63; }
        .youtube-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            max-height: 160px;
            overflow: hidden;
            border-radius: 8px;
        }
        .youtube-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .fade-in-animate { animation: fadeIn 1.2s ease-out forwards; }
        .shine-animate { animation: shine 2s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shine { 0%, 100% { filter: drop-shadow(0 0 0px gold); } 50% { filter: drop-shadow(0 0 20px gold); } }
        .initially-hidden { opacity: 0; }
        #bookmark-tooltip {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #0c2f5b;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s, bottom 0.3s;
            z-index: 100;
        }
        #bookmark-tooltip.show {
            opacity: 1;
            visibility: visible;
            bottom: 3rem;
        }
        #bookmark-btn {
            animation: star-glow 2.5s infinite ease-in-out;
        }
        @keyframes star-glow {
            0%, 100% { transform: scale(1); filter: drop-shadow(0 0 2px #facc15); }
            50% { transform: scale(1.2); filter: drop-shadow(0 0 8px #fde047); }
        }
        .accordion-toggle {
            transition: background-color 0.3s ease;
        }
        .accordion-toggle.active {
            background-color: #00bcd4;
            color: white;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .accordion-toggle i.fa-chevron-down {
            transition: transform 0.3s ease;
        }
        .section-divider {
            border: 0;
            height: 6px;
            background: #e0d9c6;
            border-radius: 6px;
            border-top: 2px solid rgba(0, 0, 0, 0.25);
            border-bottom: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 25px 0px rgba(255, 255, 255, 0.7);
        }
        .contact-link {
            position: relative;
            transition: color 0.3s ease-out;
        }
        .contact-link > * {
            transition: color 0.3s ease-out;
        }
        .contact-link::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #00bcd4;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease-out;
        }
        .contact-link:hover::after {
            transform: scaleX(1);
        }
        .contact-link:hover,
        .contact-link:hover > * {
            color: #00bcd4 !important;
        }
    </style>
</head>
<body class="antialiased" style="opacity: 0; visibility: hidden;">

    <div class="max-w-4xl mx-auto p-4 md:p-8">
        <header class="mb-16 flex justify-between items-center">
            <img src="https://i.imgur.com/I7XshtA.png" alt="Banner de la Membres√≠a" class="w-full max-w-lg h-auto rounded-lg shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/1024x256/fbf5e2/0c2f5b?text=La+Mente+del+F√©nix';">
            <button onclick="handleLogout()" class="ml-4 btn btn-pink font-bold py-2 px-4 rounded-lg text-sm flex-shrink-0">
                <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesi√≥n
            </button>
        </header>

        <section class="text-center mb-32 md:mb-40">
            <h1 id="welcome-title" class="text-5xl md:text-6xl font-bold mb-4">Bienvenido/a...</h1>
            <p class="text-lg text-gray-700 max-w-2xl mx-auto">
                Este es nuestro centro de operaciones. ¬°Guarda esta p√°gina en tus favoritos!
                <button id="bookmark-btn" class="ml-2 text-yellow-400 text-xl"><i class="fas fa-star"></i></button>
            </p>
        </section>
        
        <!-- El resto del HTML no cambia -->
        <section>
            <h2 class="text-3xl font-bold mb-6 text-center">üóìÔ∏è Calendario de Mentor√≠as</h2>
            <div class="card rounded-lg overflow-hidden p-0" style="max-height: 400px;">
                 <iframe src="https://calendar.google.com/calendar/embed?height=400&wkst=1&ctz=Europe%2FMadrid&showPrint=0&src=MDhiYzQxOGMzMTA0Y2VhYTdkODhlNjI2YWVkODQyZTU5OGM5MDViZDA3YjkzYTMzNGFkNTM1M2ZiYWJhOWE4M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23c0ca33&mode=AGENDA" style="border: 0" width="100%" height="400" frameborder="0" scrolling="no"></iframe>
            </div>
        </section>
        <hr class="my-28 section-divider">
        <section>
            <h2 class="text-3xl font-bold mb-6 text-center">üìö Lecci√≥n del D√≠a</h2>
            <div id="daily-lesson-container" class="card message-card p-6 rounded-lg text-center">
                <p class="text-lg text-gray-500">Cargando lecci√≥n...</p>
            </div>
            <div class="flex justify-center items-center flex-wrap gap-4 mt-6">
                <a href="./progreso.html" class="btn btn-cyan font-bold py-2 px-5 rounded-lg">Ir a mi Seguimiento</a>
                <button id="new-lesson-btn" class="btn btn-pink font-bold py-2 px-5 rounded-lg">Mostrar otra lecci√≥n</button>
            </div>
        </section>
        <hr class="my-28 section-divider">
        <section>
             <h2 class="text-3xl font-bold mb-6 text-center">ü§ñ Herramienta de Estudio</h2>
             <a href="./instrucciones.html" class="highlight-card p-6 rounded-lg block no-underline text-center">
                 <h3 class="text-2xl font-bold mb-2">Plataforma Inteligente</h3>
                 <p class="text-gray-700 mb-4 max-w-xl mx-auto">Tu asistente personal para explorar, consultar dudas, investigar y obtener res√∫menes de "Un Curso de Milagros".</p>
                 <div class="inline-block btn btn-cyan font-bold py-2 px-4 rounded-lg">C√≥mo Empezar</div>
            </a>
        </section>
        <hr class="my-28 section-divider">
        <div class="space-y-4">
            <!-- Accordion 1: Comunidad -->
            <div>
                <button class="accordion-toggle w-full flex justify-between items-center bg-white p-4 rounded-lg shadow-md text-left">
                    <span class="text-xl font-bold">Comunidad Privada</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content bg-white rounded-b-lg">
                    <div class="p-6 content-wrapper">
                        <p class="text-gray-700 mb-4 text-center">√önete para conversar, compartir y resolver dudas en tiempo real.</p>
                        <div class="flex justify-center gap-4">
                            <a href="https://chat.whatsapp.com/CpcmsxrkfWI8LgjI9itlSk" target="_blank" class="btn btn-whatsapp font-bold py-2 px-4 rounded-lg"><i class="fab fa-whatsapp mr-2"></i>WhatsApp</a>
                            <a href="https.me/+1TKvvNIqhO8yMDY0" target="_blank" class="btn btn-telegram font-bold py-2 px-4 rounded-lg"><i class="fab fa-telegram-plane mr-2"></i>Telegram</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Accordion 2: Recursos y Psicoterapia -->
            <div>
                <button class="accordion-toggle w-full flex justify-between items-center bg-white p-4 rounded-lg shadow-md text-left">
                    <span class="text-xl font-bold">Recursos y Sesiones</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content bg-white rounded-b-lg">
                    <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6 content-wrapper">
                        <a href="https://drive.google.com/drive/folders/1SIxteR0jPyu_z_CxWM4B0if6uuWe0IV5?usp=drive_link" target="_blank" class="card p-6 rounded-lg block no-underline flex flex-col"><div class="flex-grow"><h3 class="text-xl font-bold mb-2">Recursos en Google Drive</h3><p class="text-gray-700 mb-4">Grabaciones, gu√≠as y recursos exclusivos.</p></div><div class="btn btn-pink font-bold py-2 px-4 rounded-lg self-center">Ver Recursos</div></a>
                        <a href="https://calendly.com/lamentedelfenix/sesion-de-reprogramacion-consciente" target="_blank" class="card p-6 rounded-lg block no-underline flex flex-col"><div class="flex-grow"><h3 class="text-xl font-bold mb-2">Psicoterapia 1 a 1</h3><p class="text-gray-700 mb-4">Reserva tu sesi√≥n. <br><b>Precio Miembros: 35‚Ç¨</b> (Normal: 55‚Ç¨).</p></div><div class="btn btn-pink font-bold py-2 px-4 rounded-lg self-center">Reservar Sesi√≥n</div></a>
                    </div>
                </div>
            </div>
            <!-- Accordion 3: Audios -->
            <div>
                <button class="accordion-toggle w-full flex justify-between items-center bg-white p-4 rounded-lg shadow-md text-left">
                    <span class="text-xl font-bold">Audios</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content bg-white rounded-b-lg">
                    <div class="p-6 space-y-6 content-wrapper">
                        <div class="card p-4 rounded-lg"><h3 class="font-bold mb-2"><span class="text-brand-pink font-extrabold">MEDITACI√ìN</span> Guiada para Empezar el D√≠a</h3><div class="youtube-container"><iframe src="https://www.youtube.com/embed/QM5TB8r-ryI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>
                        <div class="card p-4 rounded-lg"><h3 id="dynamic-audio-title" class="font-bold mb-2">Cargando conversaci√≥n...</h3><div id="dynamic-youtube-player" class="youtube-container"><p class="text-center text-gray-500 p-4">Cargando √∫ltimo v√≠deo...</p></div></div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="mt-20 py-8 border-t-2 border-dashed border-gray-300 text-center">
             <h4 class="font-bold text-lg mb-4">¬øNecesitas ayuda?</h4>
             <div class="flex flex-col sm:flex-row justify-center items-center gap-8">
                 <a href="mailto:lamentedelfenix@gmail.com" target="_blank" class="contact-link email-link flex items-center gap-2 text-gray-700">
                     <i class="fas fa-envelope text-2xl"></i>
                     <span>lamentedelfenix@gmail.com</span>
                 </a>
                 <a href="https://www.instagram.com/darioarrigazzi/" target="_blank" class="contact-link flex items-center gap-2 text-pink-600">
                     <i class="fab fa-instagram text-2xl"></i>
                     <span>@darioarrigazzi</span>
                 </a>
             </div>
        </footer>
    </div>
    <div id="bookmark-tooltip">
        Presiona <kbd class="font-sans bg-gray-700 p-1 rounded">Ctrl</kbd> + <kbd class="font-sans bg-gray-700 p-1 rounded">D</kbd> para guardar esta p√°gina.
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyC5RaMnG4Qr0jQWkACovPIdEpPSc7FhJqg",
            authDomain: "web-miembros-ucdm.firebaseapp.com",
            projectId: "web-miembros-ucdm",
            storageBucket: "web-miembros-ucdm.appspot.com",
            messagingSenderId: "203515685884",
            appId: "1:203515685884:web:96a82944170c86171ba079",
            measurementId: "G-PWEQZRT39B"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const welcomeTitle = document.getElementById('welcome-title');

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userDocRef = doc(db, "users", user.uid);
                try {
                    const docSnap = await getDoc(userDocRef);
                    if (docSnap.exists() && docSnap.data().name) {
                        welcomeTitle.innerHTML = `Bienvenido/a, <span class="text-brand-pink">${docSnap.data().name}</span>`;
                    } else {
                        welcomeTitle.innerHTML = `Bienvenido/a, <span class="text-brand-pink">${user.email}</span>`;
                    }
                } catch (error) {
                    console.error("Error al obtener el nombre del usuario:", error);
                    welcomeTitle.innerHTML = `Bienvenido/a, <span class="text-brand-pink">${user.email}</span>`;
                }
            }
        });

        // El resto del script de miembros.html (lecci√≥n del d√≠a, etc.) no cambia
        document.addEventListener('DOMContentLoaded', () => {
            let allLessons = [];
            const lessonContainer = document.getElementById('daily-lesson-container');
            const newLessonBtn = document.getElementById('new-lesson-btn');
            const dailyLessonCsvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSl750iPtMNNONyMIQiSUPOWT9sukWk8yzrHnNDCE8fruXSeTybk8YPBiDyPvvMh1H1kb8veGokq5B6/pub?gid=1752477896&single=true&output=csv';
            const dynamicYoutubeContainer = document.getElementById('dynamic-youtube-player');
            const dynamicAudioTitle = document.getElementById('dynamic-audio-title');
            const audioPlaylistCsvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRmZK4KXp4kSpX6Q0VqVshkj_2L46CDfcped6i-PzqFBOHVMc1_aTAIouCB900HLCDtUcR_gH7FKYk4/pub?gid=0&single=true&output=csv'; 
            
            function getYouTubeID(url) { const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/; const match = url.match(regExp); return (match && match[2].length === 11) ? match[2] : null; }
            function parseCsvRow(row) { const delimiter = row.includes(';') ? ';' : ','; const parts = []; let current = ''; let inQuotes = false; for (const char of row) { if (char === '"' && (row.indexOf(char) === 0 || row[row.indexOf(char)-1] !== '\\')) inQuotes = !inQuotes; else if (char === delimiter && !inQuotes) { parts.push(current); current = ''; } else { current += char; } } parts.push(current); return parts.map(item => item.trim().replace(/^"|"$/g, '')); }
            if (audioPlaylistCsvUrl) { fetch(audioPlaylistCsvUrl).then(response => response.ok ? response.text() : Promise.reject('Audio list not found')).then(data => { const rows = data.split(/\r?\n/).filter(row => row.trim() !== ''); if (rows.length > 1) { const lastRow = rows[rows.length - 1]; const [title, link] = parseCsvRow(lastRow); const videoId = getYouTubeID(link); if (title && videoId) { dynamicAudioTitle.innerHTML = `<span class="text-brand-pink font-extrabold">CONVERSACIONES:</span> ${title}`; dynamicYoutubeContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`; } } }).catch(error => { console.error('Error fetching YouTube playlist:', error); dynamicYoutubeContainer.innerHTML = '<p class="text-center text-red-500 p-4">No se pudo cargar el √∫ltimo v√≠deo.</p>'; }); }
            const startAnimation = (elements) => { let delay = 0; elements.forEach(el => { (function(currentEl) { setTimeout(() => { currentEl.classList.add('fade-in-animate'); currentEl.classList.remove('initially-hidden'); if (currentEl.id === 'lesson-phrase') { currentEl.querySelector('strong').classList.add('shine-animate'); } }, delay); })(el); delay += 600; }); };
            function displayLesson(lesson) { if (!lesson) return; const [lessonNum, phrase, explanation, exercise] = lesson; if (phrase && explanation) { lessonContainer.innerHTML = ''; const h4 = document.createElement('h4'); h4.id = 'lesson-number'; h4.className = 'text-sm font-bold tracking-widest uppercase initially-hidden'; h4.textContent = `Lecci√≥n ${lessonNum}`; const p1 = document.createElement('p'); p1.id = 'lesson-phrase'; p1.className = 'text-xl italic mt-2 initially-hidden'; const strongEl = document.createElement('strong'); strongEl.className = 'text-brand-green font-bold'; strongEl.textContent = `‚Äú${phrase}‚Äù`; p1.appendChild(strongEl); const p2 = document.createElement('p'); p2.id = 'lesson-explanation'; p2.className = 'text-lg mt-4 initially-hidden'; p2.textContent = explanation; lessonContainer.appendChild(h4); lessonContainer.appendChild(p1); lessonContainer.appendChild(p2); const animatedElements = [h4, p1, p2]; if (exercise && exercise.trim() !== '') { const exerciseBox = document.createElement('div'); exerciseBox.id = 'lesson-exercise-box'; exerciseBox.className = 'mt-6 pt-4 border-t-2 border-dashed border-pink-200 w-full initially-hidden'; const h5 = document.createElement('h5'); h5.className = 'font-bold text-brand-pink'; h5.textContent = 'Ejercicio Recomendado:'; const p3 = document.createElement('p'); p3.className = 'mt-2 text-gray-700'; p3.textContent = exercise; exerciseBox.appendChild(h5); exerciseBox.appendChild(p3); lessonContainer.appendChild(exerciseBox); animatedElements.push(exerciseBox); } startAnimation(animatedElements); } }
            function showRandomLesson() { if (allLessons.length === 0) return; const randomIndex = Math.floor(Math.random() * allLessons.length); displayLesson(allLessons[randomIndex]); }
            function getDayOfYear() { const now = new Date(); const start = new Date(now.getFullYear(), 0, 0); const diff = now - start; const oneDay = 1000 * 60 * 60 * 24; return Math.floor(diff / oneDay); }
            fetch(dailyLessonCsvUrl).then(response => response.ok ? response.text() : Promise.reject('Network response was not ok')).then(data => { allLessons = data.split(/\r?\n/).filter(row => row.trim() !== '').slice(1).map(row => parseCsvRow(row)); const observer = new IntersectionObserver((entries, observerInstance) => { entries.forEach(entry => { if (entry.isIntersecting) { if (allLessons.length > 0) { const dayOfYear = getDayOfYear(); const lessonIndex = (dayOfYear - 1) % allLessons.length; displayLesson(allLessons[lessonIndex]); } observerInstance.unobserve(entry.target); } }); }, { threshold: 0.1 }); observer.observe(lessonContainer); }).catch(error => { console.error('Error fetching the daily lesson:', error); lessonContainer.innerHTML = '<p class="text-lg text-red-500">No se pudo cargar la lecci√≥n del d√≠a. Por favor, int√©ntalo de nuevo m√°s tarde.</p>'; });
            newLessonBtn.addEventListener('click', showRandomLesson);

            const bookmarkBtn = document.getElementById('bookmark-btn');
            const bookmarkTooltip = document.getElementById('bookmark-tooltip');
            const isMobile = /Mobi|Android/i.test(navigator.userAgent);
            
            if (isMobile) {
                bookmarkTooltip.innerHTML = `Usa la opci√≥n 'A√±adir a pantalla de inicio' de tu navegador.`;
            } else if(navigator.userAgent.includes("Mac")) {
                bookmarkTooltip.innerHTML = `Presiona <kbd class="font-sans bg-gray-700 p-1 rounded">Cmd</kbd> + <kbd class="font-sans bg-gray-700 p-1 rounded">D</kbd> para guardar.`;
            }
            
            bookmarkBtn.addEventListener('click', () => {
                bookmarkTooltip.classList.add('show');
                setTimeout(() => {
                    bookmarkTooltip.classList.remove('show');
                }, 3000);
            });

            const accordions = document.querySelectorAll('.accordion-toggle');
            accordions.forEach(accordion => {
                accordion.addEventListener('click', () => {
                    const content = accordion.nextElementSibling;
                    const icon = accordion.querySelector('i.fa-chevron-down');
                    const isActive = accordion.classList.contains('active');

                    accordions.forEach(otherAccordion => {
                        if (otherAccordion !== accordion) {
                            otherAccordion.classList.remove('active');
                            otherAccordion.nextElementSibling.style.maxHeight = null;
                            otherAccordion.querySelector('i.fa-chevron-down').style.transform = 'rotate(0deg)';
                        }
                    });

                    if (isActive) {
                        accordion.classList.remove('active');
                        content.style.maxHeight = null;
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        accordion.classList.add('active');
                        icon.style.transform = 'rotate(180deg)';
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                });
            });
        });
    </script>
<script type="module" src="./auth-guard.js"></script>
</body>
</html>
```

---
### Pasos Finales

1.  **Reemplaza** el contenido de tus archivos `login.html` y `miembros.html` con estos dos bloques de c√≥digo.
2.  **Sube** los dos archivos actualizados a GitHub.
3.  **Espera** a que Cloudflare despliegue la nueva versi√≥n.
4.  **Borra** el usuario de prueba de Firebase Authentication y de la base de datos Firestore para hacer una prueba limpia.
5.  **Reg√≠strate** de nuevo en una ventana de inc√≥gnito.

Ahora, el flujo deber√≠a ser: te registras, se te redirige inmediatamente al √°rea de miembros, y el saludo ya deber√≠a mostrar tu nombre. El email de confirmaci√≥n llegar√° unos segundos despu